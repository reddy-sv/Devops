Volume Mapping:

When you run a Docker container, it has its own isolated filesystem (created from the image).
So if you create or modify files inside the container, theyâ€™re lost when:

The container stops or is removed.
You rebuild the container.

Creation volume #docker volume create
list the volumes #docker volume ls
remove the volume #docker volume remove rm volumename
remove multiple at a time #docker rm volume1 volume2
Delete All Unused Volumes #docker volume prune
Delete All Volumes (Force) #docker rm -f $(docker ps -aq)   # Remove all containers first
                           #docker volume rm $(docker volume ls -q)


ðŸ‘‰ Volume mapping solves this by connecting (or â€œmappingâ€) host machine storage with container storage.

####Types of Volume Mapping in Docker:
Docker supports 3 main types of volume mapping:


| Type                      | Where Data Lives              | Created By           | Use Case                                |
| ------------------------- | ----------------------------- | -------------------- | --------------------------------------- |
|     **Bind Mounts**       | On Host (you choose the path) | User                 | For development (you want live updates) |
|     **Named Volumes**     | In Docker-managed location    | Docker               | For production or persistent data       |
|     **Anonymous Volumes** | In Docker-managed location    | Docker automatically | Temporary storage                       |


===============================================================================
1) Bind Mounts (Manual Mapping)
A bind mount is when Docker makes a directory or file on your host machine available inside the container..
 >>>>>>>>>So the container sees and uses your real files from your host machine â€” not a copy.

Syntax: docker run -v /host/path:/container/path IMAGE_NAME
Modern (recommended) syntax: docker run --mount type=bind,source=/host/path,target=/container/path IMAGE_NAME

##########How Bind Mount Works (Internally)
The container sees the real files on the host, not a copy.
Changes on the host are reflected inside the container immediately.
Changes inside the container are reflected on the host immediately.

LAB:

[root@ip-172-31-32-7 ~]# pwd
/root
[root@ip-172-31-32-7 ~]# mkdir subbareddy
[root@ip-172-31-32-7 ~]# cd subbareddy/
[root@ip-172-31-32-7 subbareddy]# echo "hello text" > /root/subbareddy/test.txt
[root@ip-172-31-32-7 subbareddy]# docker images
REPOSITORY   TAG       IMAGE ID       CREATED       SIZE
ubuntu       latest    c3a134f2ace4   5 weeks ago   78.1MB
[root@ip-172-31-32-7 subbareddy]# docker run -it -v /root/subbareddy:/mnt c3a134f2ace4 bash
root@1822d8878686:/# cd /mnt
root@1822d8878686:/mnt# ls -l
total 4
-rw-r--r--. 1 root root 11 Nov 25 09:47 test.txt
root@1822d8878686:/mnt# hostname -i
172.17.0.2
root@1822d8878686:/mnt# touch t1 t2 t3
root@1822d8878686:/mnt# exit
exit
[root@ip-172-31-32-7 subbareddy]# ls -l
total 4
-rw-r--r--. 1 root root  0 Nov 25 09:48 t1
-rw-r--r--. 1 root root  0 Nov 25 09:48 t2
-rw-r--r--. 1 root root  0 Nov 25 09:48 t3
-rw-r--r--. 1 root root 11 Nov 25 09:47 test.txt
[root@ip-172-31-32-7 subbareddy]# hostname -i
172.31.32.7
[root@ip-172-31-32-7 subbareddy]#


Description: You manually map a host directory or file to a path inside the container.
====================================================================================================================
2)Named Volumes (Docker-managed)
Docker stores the data in a Docker-managed path (usually /var/lib/docker/volumes/), and you give it a name to identify and reuse.
Docker stores it in its own path:
                              /var/lib/docker/volumes/mydata/_data

Syntax: docker volume create mydata
        docker run -it -v mydata:/appdata ubuntu bash

Moderan Syntax: docker run --mount source=mydata,target=/appdata ubuntu bash

>>>>>>>>>>>>>> later you can terminate ubuntu container and use the mydata in different container then it iwll reflect the script.

LAB:

[root@ip-172-31-21-164 demo]# pwd
/root/demo
[root@ip-172-31-21-164 demo]# docker volume create infinity
infinity
[root@ip-172-31-21-164 demo]# docker volume ls
DRIVER    VOLUME NAME
local     infinity
[root@ip-172-31-21-164 demo]# docker images
REPOSITORY   TAG       IMAGE ID       CREATED       SIZE
banti        latest    0981c390e66c   2 hours ago   134MB
[root@ip-172-31-21-164 demo]# docker run -it --name cont1 -v infinity:/mnt/data banti
root@d969ac4c392e:/# cd /mnt/data
root@d969ac4c392e:/mnt/data# ls
root@d969ac4c392e:/mnt/data# cat >f1
this is very imp file
root@d969ac4c392e:/mnt/data# exit
exit
[root@ip-172-31-21-164 demo]# docker run -it --name cont3 -v infinity:/mnt/data banti
root@b67eb903ce3f:/# cd /mnt/data
root@b67eb903ce3f:/mnt/data# ls -l
total 4
-rw-r--r--. 1 root root 23 Nov 10 09:17 f1
root@b67eb903ce3f:/mnt/data#
==================================================================================================================================================
3)Anonymous Volume:
You donâ€™t specify a name or host path.
Docker automatically creates a randomly named volume.

Syntax: docker run -it -v /mnt/data ubuntu bash
======================================================================================================================================
